<template #createModal let-c="close">
    <div class="modal-header">
        <span class="pull-right">
            <a class="glyphicon glyphicon-remove" (click)="c()"></a>
        </span>
        <h2>{{create.title}}</h2>
    </div>
    <div class="modal-body">
        <ms-create-task [(clinic)]="model" #create (submit)="c();"></ms-create-task>
    </div>
</template>
<div class="container">
    <div class="well">
        <legend>Create a Clinic</legend>
        <div *ngIf="submitted && !successful" id="submitErrorAlert" class="alert alert-danger fadeIn text-center"> 
            There was an error submitting this clinic. Unable to create a clinic at this time.
        </div>
        <form (ngSubmit)="onSubmit()" #clinicCreateForm="ngForm">
            <div class="form-group">
                <label for="name">Clinic Name</label>
                <input type="text" class="form-control" id="name" required [(ngModel)]="model.name" name="name" #name=ngModel>
            </div>
            <br>
            <div class="form-group"> 
                <label>Tasks</label>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Category</th>
                            <th>Staff</th>
                            <th>Repeats</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of model.tasks; trackBy: trackByFn">
                            <td>{{task.description}}</td>
                            <td>{{task.category}}</td>
                            <td><span *ngIf="task.ma1">MA1 </span><span *ngIf="task.ma2"> MA2</span><span *ngIf="task.ma3"> MA3 </span><span *ngIf="task.frontDesk"> Front Desk</span></td>
                            <td>{{task.repeats}}</td>
                        </tr>
                    </tbody>
                </table>
                <span><a (click)="openCreateModal(createModal)">Add task...</a></span>
            </div>
            <br>
            <button type="submit" class="btn btn-default" [disabled]="!clinicCreateForm.form.valid">Submit</button>
        </form>
    </div>
</div>